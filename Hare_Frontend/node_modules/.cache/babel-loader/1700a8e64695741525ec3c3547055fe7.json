{"ast":null,"code":"import axios from \"axios\";\nvar backendurl = 'http://54.252.168.81:8080';\n\nvar startAuthService = function startAuthService() {\n  var key = localStorage.getItem('auth');\n\n  if (key === undefined || key === null) {\n    console.log(\"Auth service started: Not logged in.\");\n  } else {\n    console.log(\"Auth service started: Logged in\");\n  }\n}; // Log user in or out using set usr/pass\n\n\nvar authenticateUser = function authenticateUser(usr, pass) {\n  var p_user = String(usr);\n  var p_pass = String(pass);\n  var request = {\n    username: p_user,\n    password: p_pass\n  };\n  return axios.post(\"\".concat(backendurl, \"/auth\"), {\n    data: request\n  });\n};\n\nvar setAuthKey = function setAuthKey(key) {\n  if (key != null && key !== undefined) {\n    axios.get(\"\".concat(backendurl, \"/userdata/key/\").concat(key)).then(function (res) {\n      localStorage.setItem('userdata', JSON.stringify(res.data));\n      localStorage.setItem('auth', key);\n    }).catch(function (err) {\n      console.log(\"INVALID KEY FOR USERDATA\");\n    });\n  } else {\n    console.log(\"INVALID KEY STORE ATTEMPT\");\n  }\n}; // Find out if the user is logged in or out \n\n\nvar hasAuthKey = function hasAuthKey() {\n  var key = localStorage.getItem('auth');\n  var authval = false;\n\n  if (key !== undefined && key !== null) {\n    authval = true;\n  }\n\n  if (authval == true) {\n    console.log(\"[AuthService.js isAuthenticated()]: authval is truthy\");\n    console.log(\"[ARGS]: \", authval, key);\n    return authval;\n  } else {\n    console.log(\"[AuthService.js isAuthenticated()]: Invalid authval\");\n    console.log(\"[ARGS]: \", authval, \"from\", localStorage.getItem('auth'));\n    return authval;\n  }\n};\n\nvar LogOut = function LogOut() {\n  localStorage.clear();\n};\n\nexport default {\n  startAuthService: startAuthService,\n  authenticateUser: authenticateUser,\n  setAuthKey: setAuthKey,\n  hasAuthKey: hasAuthKey,\n  LogOut: LogOut\n};","map":{"version":3,"sources":["/Users/michaelwlloyd/Desktop/NeoHare/Hare_Frontend/src/components/actions/AuthService.js"],"names":["axios","backendurl","startAuthService","key","localStorage","getItem","undefined","console","log","authenticateUser","usr","pass","p_user","String","p_pass","request","username","password","post","data","setAuthKey","get","then","res","setItem","JSON","stringify","catch","err","hasAuthKey","authval","LogOut","clear"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,UAAU,GAAG,2BAAnB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC9B,MAAIC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAV;;AACA,MAAGF,GAAG,KAAKG,SAAR,IAAqBH,GAAG,KAAK,IAAhC,EAAsC;AACrCI,IAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACA,GAFD,MAEO;AACND,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACA;AACD,CAPD,C,CASA;;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAMC,IAAN,EAAe;AACvC,MAAIC,MAAM,GAAGC,MAAM,CAACH,GAAD,CAAnB;AACA,MAAII,MAAM,GAAGD,MAAM,CAACF,IAAD,CAAnB;AACA,MAAII,OAAO,GAAG;AACbC,IAAAA,QAAQ,EAAEJ,MADG;AAEbK,IAAAA,QAAQ,EAAEH;AAFG,GAAd;AAKA,SACCd,KAAK,CAACkB,IAAN,WAAcjB,UAAd,YAAiC;AAAEkB,IAAAA,IAAI,EAAEJ;AAAR,GAAjC,CADD;AAGA,CAXD;;AAaA,IAAMK,UAAU,GAAG,SAAbA,UAAa,CAACjB,GAAD,EAAS;AAC3B,MAAGA,GAAG,IAAI,IAAP,IAAeA,GAAG,KAAKG,SAA1B,EAAqC;AACpCN,IAAAA,KAAK,CAACqB,GAAN,WAAapB,UAAb,2BAAwCE,GAAxC,GACCmB,IADD,CACM,UAAAC,GAAG,EAAI;AACZnB,MAAAA,YAAY,CAACoB,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeH,GAAG,CAACJ,IAAnB,CAAjC;AACAf,MAAAA,YAAY,CAACoB,OAAb,CAAqB,MAArB,EAA6BrB,GAA7B;AACA,KAJD,EAIGwB,KAJH,CAIS,UAAAC,GAAG,EAAI;AACfrB,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,KAND;AAOA,GARD,MAQO;AACND,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACA;AACD,CAZD,C,CAcA;;;AACA,IAAMqB,UAAU,GAAG,SAAbA,UAAa,GAAM;AACxB,MAAI1B,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAV;AACA,MAAIyB,OAAO,GAAG,KAAd;;AACA,MAAI3B,GAAG,KAAKG,SAAR,IAAqBH,GAAG,KAAK,IAAjC,EAAuC;AACtC2B,IAAAA,OAAO,GAAG,IAAV;AACA;;AAED,MAAGA,OAAO,IAAI,IAAd,EAAoB;AACnBvB,IAAAA,OAAO,CAACC,GAAR,CAAY,uDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBsB,OAAxB,EAAiC3B,GAAjC;AACA,WAAO2B,OAAP;AACA,GAJD,MAIO;AACNvB,IAAAA,OAAO,CAACC,GAAR,CAAY,qDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBsB,OAAxB,EAAiC,MAAjC,EAAyC1B,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAzC;AACA,WAAOyB,OAAP;AACA;AACD,CAhBD;;AAkBA,IAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACpB3B,EAAAA,YAAY,CAAC4B,KAAb;AACA,CAFD;;AAIA,eAAe;AACd9B,EAAAA,gBAAgB,EAAhBA,gBADc;AAEdO,EAAAA,gBAAgB,EAAhBA,gBAFc;AAGdW,EAAAA,UAAU,EAAVA,UAHc;AAIdS,EAAAA,UAAU,EAAVA,UAJc;AAKdE,EAAAA,MAAM,EAANA;AALc,CAAf","sourcesContent":["\nimport axios from \"axios\";\n\nconst backendurl = 'http://54.252.168.81:8080';\n\nconst startAuthService = () => { \n\tlet key = localStorage.getItem('auth'); \n\tif(key === undefined || key === null) { \n\t\tconsole.log(\"Auth service started: Not logged in.\");\n\t} else { \n\t\tconsole.log(\"Auth service started: Logged in\");\n\t}\n}\n\n// Log user in or out using set usr/pass\nconst authenticateUser = (usr, pass) => {\n\tlet p_user = String(usr);\n\tlet p_pass = String(pass);\n\tlet request = { \n\t\tusername: p_user,\n\t\tpassword: p_pass,\n\t};\n\n\treturn ( \n\t\taxios.post(`${backendurl}/auth`, { data: request })\n\t)\n} \n\nconst setAuthKey = (key) => { \n\tif(key != null && key !== undefined) { \n\t\taxios.get(`${backendurl}/userdata/key/${key}`)\n\t\t.then(res => { \n\t\t\tlocalStorage.setItem('userdata', JSON.stringify(res.data));\n\t\t\tlocalStorage.setItem('auth', key); \n\t\t}).catch(err => { \n\t\t\tconsole.log(\"INVALID KEY FOR USERDATA\");\n\t\t});\n\t} else { \n\t\tconsole.log(\"INVALID KEY STORE ATTEMPT\");\n\t}\n}\n\n// Find out if the user is logged in or out \nconst hasAuthKey = () => { \n\tlet key = localStorage.getItem('auth');\n\tlet authval = false; \n\tif (key !== undefined && key !== null) { \n\t\tauthval = true; \n\t}\n\n\tif(authval == true) { \n\t\tconsole.log(\"[AuthService.js isAuthenticated()]: authval is truthy\"); \n\t\tconsole.log(\"[ARGS]: \", authval, key); \n\t\treturn authval; \t\n\t} else { \n\t\tconsole.log(\"[AuthService.js isAuthenticated()]: Invalid authval\"); \n\t\tconsole.log(\"[ARGS]: \", authval, \"from\", localStorage.getItem('auth')); \n\t\treturn authval; \n\t} \n} \n\nconst LogOut = () => { \n\tlocalStorage.clear(); \n} \n\nexport default { \n\tstartAuthService,\n\tauthenticateUser, \n\tsetAuthKey, \n\thasAuthKey, \n\tLogOut\n} \n"]},"metadata":{},"sourceType":"module"}